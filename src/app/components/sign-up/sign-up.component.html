<main class="container m-auto w-75">
    <section class="content-main mt-80 mb-80">
        <div class="card mx-auto card-login">
            <div class="card-body">
                <h4 class="card-title mb-4">Créer un compte</h4>
                <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" >
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Email</label>
                            <input class="form-control"  formControlName="email"  placeholder="Votre email" type="email">
                            <div *ngIf="f['email'].errors && (f['email'].dirty || f['email'].touched) || submitted && registerForm.controls['email'].errors" class="text-danger">
                                <div *ngIf="f['email'].errors || (submitted && registerForm.controls['email'].errors)">Email est requis.</div>
                            </div>
                            <div *ngIf="(f['email'].errors && (f['email'].dirty || f['email'].touched) )&&f['email'].errors['email']">Email invalide.</div>
                        </div> 
                        <div class="col-md-6">
                            <label class="form-label">Mot de passe</label>
                            <input class="form-control" placeholder="Mot de passe" type="password" formControlName="password">
                            <div *ngIf="f['password'].errors && (f['password'].dirty || f['password'].touched) || submitted && registerForm.controls['password'].errors" class="text-danger">
                                <div *ngIf="f['password'].errors || submitted && registerForm.controls['password'].errors">Mot de passe est requis.</div>
                            </div>
                            <div *ngIf="(f['password'].errors && (f['password'].dirty || f['password'].touched))&&f['password'].errors['minlength']">Le mot de passe doit contenir au moins 8 caractères.</div>
                        </div> 
                    </div> 

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Nom</label>
                            <input class="form-control" placeholder="Votre nom" type="text" formControlName="nom">
                            <div *ngIf="f['nom'].errors && (f['nom'].dirty || f['nom'].touched)  || submitted && registerForm.controls['nom'].errors" class="text-danger">
                                <div *ngIf="f['nom'].errors || submitted && registerForm.controls['nom'].errors">Le nom est requis.</div>
                              
                            </div>
                            <div *ngIf="(f['nom'].errors && (f['nom'].dirty || f['nom'].touched))&& f['nom'].errors['minlength']">Le nom doit avoir au moins 2 caractères.</div>
                            <div *ngIf="(f['nom'].errors && (f['nom'].dirty || f['nom'].touched))&&f['nom'].errors['maxlength']">Le nom ne peut pas dépasser 50 caractères.</div>
                        </div> 
                        <div class="col-md-6">
                            <label class="form-label">Prénom</label>
                            <input class="form-control" placeholder="Votre prénom" type="text" formControlName="prenom">
                            <div *ngIf="f['prenom'].errors && (f['prenom'].dirty || f['prenom'].touched) || submitted && registerForm.controls['prenom'].errors" class="text-danger">
                                <div *ngIf="f['prenom'].errors || submitted && registerForm.controls['prenom'].errors">Le prénom est requis.</div>
                                
                            </div>
                            <div *ngIf="(f['prenom'].errors && (f['prenom'].dirty || f['prenom'].touched) )&&f['prenom'].errors['minlength']">Le prénom doit avoir au moins 2 caractères.</div>
                            <div *ngIf="(f['prenom'].errors && (f['prenom'].dirty || f['prenom'].touched) )&&f['prenom'].errors['maxlength']">Le prénom ne peut pas dépasser 50 caractères.</div>
                        </div> 
                    </div> 

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Nom d'utilisateur</label>
                            <input class="form-control" placeholder="Nom d'utilisateur" type="text" formControlName="username">
                            <div *ngIf="f['username'].errors && (f['username'].dirty || f['username'].touched)||submitted && registerForm.controls['username'].errors" class="text-danger">
                                <div *ngIf="f['username'].errors || submitted && registerForm.controls['username'].errors">Nom d'utilisateur est requis.</div>
                            </div>
                        </div> 
                        <div class="col-md-6">
                            <label class="form-label">Sexe</label>
                            <select class="form-control" formControlName="sexe">
                                <option value="" disabled selected>Choisissez votre sexe</option>
                                <option value="HOMME">Homme</option>
                                <option value="FEMME">Femme</option>
                            </select>
                            <div *ngIf="f['sexe'].errors && (f['sexe'].dirty || f['sexe'].touched || submitted && registerForm.controls['sexe'].errors)" class="text-danger">
                                <div *ngIf="f['sexe'].errors['required']">Le sexe est requis.</div>
                            </div>
                        </div> 
                    </div> 

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="selectPays">Pays</label>
                                <select class="form-control" id="selectPays" formControlName="countrySelected"  (change)="onCountrySelected($event)">
                                    <option value="" disabled selected>Choisir un pays</option>
                                    <option *ngFor="let country of listcountry" [value]="country.iso2" >{{ country.name }}</option>
                                </select>
                                <div *ngIf="f['countrySelected'].errors && (f['countrySelected'].dirty || f['countrySelected'].touched)" class="text-danger">
                                    <div *ngIf="f['countrySelected'].errors['required']">Le pays est requis.</div>
                                </div>
                            </div>
                        </div> 
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="selectEtat">État</label>
                                <select class="form-control" id="selectEtat" name="state" formControlName="selectedState"  (change)="onStateSelected($event)">
                                    <option value=""  disabled selected>Choisir un état</option>
                                    <option *ngFor="let state of listState" [value]="state.iso2" >{{ state.name }}</option>
                                </select>
                            </div>
                        </div> 
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="selectVille">Ville</label>
                                <select class="form-control" id="selectVille"  formControlName="selectedCity" >
                                    <option value="" selected>Choisir une ville</option>
                                    <option *ngFor="let city of listCity" [value]="city.name">{{ city.name }}</option>
                                </select>
                            </div>
                        </div> 
                    </div> 


                    <div class="row mb-3">
                        <div class="col-md-12">
                            <label class="form-label">Préférences de style</label>
                            <select class="form-control"  formControlName="preferencesStyle">
                                <option value="Casual">Casual</option>
                                <option value="Formal">Formel</option>
                                <option value="Sportswear">Vêtements de sport</option>
                                <option value="Business">Tenue professionnelle</option>
                                <option value="Eveningwear">Tenue de soirée</option>
                                <option value="Business Casual">Tenue décontractée professionnelle</option>
                                <option value="Smart Casual">Tenue décontractée élégante</option>
                                <option value="Streetwear">Streetwear</option>
                                <option value="Vintage">Vintage</option>
                                <option value="Other">Autre</option>
                            </select>
                             <div *ngIf="f['preferencesStyle'].errors && (f['preferencesStyle'].dirty || f['preferencesStyle'].touched) || (submitted && registerForm.controls['preferencesStyle'].errors)" class="text-danger">
            <div>Les préférences de style sont requises.</div>
        </div>
                        </div> 
                    </div> 
       

                    
                    <ul *ngIf="errorMessage" class="text-danger"><li>{{ errorMessage }}</li></ul>


                    <div class="mb-3">
                        <p class="small text-center text-muted">En vous inscrivant, vous confirmez avoir lu et accepté nos avis aux utilisateurs et notre politique de confidentialité.</p>
                    </div> 

                    <div class="mb-4">
                        <button type="submit" class="btn btn-primary w-100"> S'inscrire </button>
                    </div> 
                </form>
                <p class="text-center small text-muted mb-15">ou s'inscrire avec</p>
                <div class="d-flex gap-2 mb-4">
                 
                </div>
                <p class="text-center mb-2">Vous avez déjà un compte? <a [routerLink]="['/login']">Connectez-vous maintenant</a></p>
            </div>
        </div>
    </section>
</main>
